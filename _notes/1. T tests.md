# 2 T tests
- ## 2.1 单样本t检验
	- 统计方法简介
		- 单样本t检验常常用来检验样本数据是否与某一特定的数值之间存在差异，例如，想要验证某一批产品是否符合规定的标准，利用单样本t检验可以将抽出的一组样本数据与规定的标准数值进行比较。
			- 1.单样本t检验的使用前提是总体正态分布且总体方差未知。
			- 2.当t检验有明确的方向时使用单尾t检验，例如检测某款饮料的净含量是否显著大于标准规定的最小值500ml；当t检验没有明确的方向时使用双尾t检验，例如检测某一学校学生的某次考试成绩与全市统考平均分是否有显著差异。
			- 3.  在t检验中，效应量的大小常常用科恩d值表示（Cohen’s d=(样本均值-总体均值)/样本标准差）。
		- 我们可以在Gpower中使用样本量大小、显著性水平α、检验力β以及效应量d中的任意三个变量去计算第四个变量。例如，我们可以通过给定的显著性水平α、检验力β以及效应量d对所需要的样本量大小进行估计（A priori，见图1.1）。
			- 图1.1 Type of power analysis![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fpic1.zhimg.com%2Fv2-01e1e3639ab20e3de53faf64f28e66f4_b.jpg)
		- 计算样本量
			- 在进行实验前，我们可以使用Gpower计算所需的样本量大小。
			- 【示例1】
				- 研究者借鉴了传统内隐联想测验（IAT）的程序模式，开发了一套单类内隐联想测验（SC-IAT），SC-IAT将两个目标对象变成一个目标对象，减少了实验步骤。研究者希望探究SC-IAT测验里的自动联想激活成分是否存在。研究者将SC-IAT的加工过程分为两种成分：自动联想激活（A）和控制加工过程（C）。利用被试在相容任务和不相容任务的错误率计算A和C两个参数，可以计算出每个被试的参数A和C值。然后计算样本平均值，分别与0作比较，进行显著性检验。若自动联想激活（A）的样本平均值与0有显著性差异，则可说明SC-IAT测验里存在自动联想激活成分。
				- 研究结果显示，A参数的平均值为0.11，与数值"0"进行单样本t检验,t（85）=3.67，p<.01，d=.68。C参数的平均值为0.88，与数值"0"进行单样本t检验,t（85）=41.60，p<.01，d=7.73。（参考文献：艾传国，佐斌（2012）. 单类内隐联想测验(SC-IAT)自动联想激活成分分离. 第十五届全国心理学学术会议.）
				- 操作流程（见图1.2）
					- ①首先选定t检验：Test family中选定t test
					- ②选定单样本t检验：Statisticaltest中选定Means: Difference from constant (one sample case)
					- ③选定先验计算样本量：Type ofpower analysis中选定A priori: Compute required sample size– given α, power, and effect size（如需计算显著性水平α和检验力β、显著性水平α、检验力β、效应量d时分别选择Compromise、Criterion、Post hoc、Sensitivity）
					- ④输入给定参数：InputParameters中的Tail (s)（单双尾检验）选择Two（根据实用统计方法的真实情况进行选择），Effect size d（效应量d）输入0.5，α err prob（显著性水平α）输入0.01， Power (1-βerr prob)（检验力β）输入0.8
						- Tips：在没有特殊要求的一般情况下，显著性水平α根据实际情况可输入0.05，0.01，0.001等；检验力β一般取0.8以上；t检验中的效应量d一般取0.2（小效应量），0.5（中等效应量），0.8（大效应量）。
					- ⑤进行计算：点击Calculate
					- ⑥输出结果：OutputParameters中给出的结果包括Noncentrality parameter δ（非中心参数，可用于描述常用的检验统计量，代表检验统计量的均值偏离在原假设为真情况下的均值的程度）=3.57，Critical t（t值）=2.68，Df（自由度）=50，Total sample size（样本量）=51，Actual power（实际检验力）=0.81
						- 结果说明，当我们需要结果在0.01的水平上显著且效应量为中等的0.5时，我们需要51个样本进行分析，也就是说我们至少需要51个被试才能使我们实验数据结果的检验力在0.8以上。
					- ⑦输出检验统计量的关系图：我们还可以通过点击X-Y plot fora range of values将四个检验统计量之间的关系进行可视化展示。在Plotparameters中我们可以自由选择固定某两个变量并规定纵横坐标的变量。在示例中，研究者获取了86个被试的数据，β已经大于0.98。同时，我们还可以选择将不同水平的d值同时呈现在图中进行比较。
						- 图1.2 单样本t检验样本量计算操作界面![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fpic3.zhimg.com%2Fv2-c3d732beff1492d14d94e06394eff262_b.jpg)
						- 图1.3 单样本t检验统计检验量关系图输出界面1![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fpic3.zhimg.com%2Fv2-481dde75c94cf4558f678409295582fa_b.jpg)
					- 估计效应量
					- 当我们在实验前计算样本量时，需要事先给定效应量d值，通常我们会选择给出常用的0.2，0.5或0.8，但如果我们已经获得了一部分数据，可以利用现有的样本数据对效应量进行预估。
			- 【示例2】
				- ![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fpic3.zhimg.com%2Fv2-ea12de86f121bfeaeecb7f4e5437c202_b.jpg)
				- （示例来源：[https://zhuanlan.zhihu.com/p/50089517](https://zhuanlan.zhihu.com/p/50089517)）
					- 操作流程（见图1.4）
				- ①-③步骤同【示例1】
				- ④输入给定参数：InputParameters中的Tail (s) 选择One，α err prob输入0.01，Power (1-βerr prob) 输入0.8，Effect sized暂不输入
				- ⑤预估效应量：点击Determine，在弹出的对话框中依次输入Mean H0（总体均值）=20，Mean H1（样本均值）=17.17，SD σ（样本标准差）=2.98，点击Calculate计算出Effect size d=0.95，或者直接点击Calculate and transfer to main window将计算好的效应量自动填进左边的Input parameters模块
				- ⑥进行计算，输出结果：Inputparameters模块中点击Calculate，Output Parameters中给出结果Noncentralityparameter δ=3.55，Critical t=2.65，Df=13，Total samplesize=14，Actual power=0.80
				- 结果说明，至少需要14个样本才能保证在0.01的显著性水平下，效应量等于0.95，检验力大于0.8。绘制统计检验量关系图（见图1.5）可知，示例中只取10个样本所能达到的检验力只有0.59，需要继续抽样。
				- 图1.4预估单样本t检验的效应量大小操作界面![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fpic4.zhimg.com%2Fv2-256c2cc9ee4b082aa4ac71725fc39757_b.jpg)
					- 图1.5 单样本t检验统计检验量关系图输出界面2
						- ![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fpic2.zhimg.com%2Fv2-e879987ecdf4220f997bbc18083d99d5_b.jpg)
- ## 2.2 独立样本t检验
	- 统计方法简介
		- 独立样本t检验常常用来检验两个不相关样本数据之间是否存在差异。例如，想要验证两所学校的学生数学成绩之间是否存在差异，可以使用独立样本t检验将分别从两个学校中抽出的两组样本数据进行比较。
			- 1.  独立样本t检验的使用前提是两总体正态分布且两总体方差未知。
			- 2.  在进行独立样本t检验前需要对两组样本进行方差齐性检验，两组样本方差齐性可进行检验，若方差不齐性，则需进行柯克兰-柯克斯t检验。
	- Gpower使用与操作
		- 独立样本t检验在Gpower的功能和操作上同单样本t检验相同。
		- 计算样本量
			- 【示例】
				- 研究者记录了两种不同路段（基本路段vs. 合流影响区路段）上车辆的行驶速度，并进行独立样本t检验，比较两组样本是否存在差异，以探究道路出入口对车辆流速的影响，具体数据如下：
					- 	（参考文献：王茹，翁剑成，乔国梁. (2015). 不同道路条件对城市路段交通流特征的影响研究. 交通工程, 015(001), 8-14.）![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fpic1.zhimg.com%2Fv2-70a07e830d21f7a72c5270157a7599d8_b.jpg)
					- 操作流程（见图1.6）
						- ①选定t检验：Test family中选定t test
						- ②选定单样本t检验：Statisticaltest中选定Means: Difference from two independent means (two groups)
						- ③选定先验计算样本量：Type ofpower analysis中选定A priori: Compute required sample size– given α, power, and effect size
						- ④输入给定参数：InputParameters中的Tail (s)选择Two，α err prob输入0.01， Power (1-βerr prob)输入0.8，Allocationratio N2/N1（两组样本量比值）输入1（可根据实际情况调整）
						- ⑤预估效应量：若有部分数据，可对效应量进行预估。点击Determine，若两组样本量不同，则只需在n1！=n2下输入两组样本的均值，若两组样本量相同，则需在n1=n2下分别输入Mean group 1（组1样本平均数）=75.08，Mean group 2（组2样本平均数）=72.10，SD σ group 1（组1样本标准差）=3.985，SD σ group 2（组2样本标准差）=4.040，直接点击Calculate and transfer to main window将计算好的效应量0.74自动填进左边的Input parameters模块
						- ⑥进行计算，输出结果：点击Calculate，Output Parameters中给出的结果包括Noncentralityparameter δ=3.52，Critical t=2.63，Df=88，Sample sizegroup 1（组1样本量）=45，Sample size group 2（组2样本量）=45，Total samplesize（总样本量）=90，Actual power（实际检验力）=0.81
				- 结果说明，当我们需要结果在0.01的水平上显著且效应量为0.74时，我们需要两组样本量均至少为45，也就是说我们每组至少需要45个被试才能使我们实验数据结果的检验力在0.8以上。根据统计检验量关系图（图1.7）可知当总样本量大于130时检验力将稳定在0.95以上，因此示例中的样本量时足够的。
					- 图1.6 独立样本t检验样本量计算操作界面![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fpic1.zhimg.com%2Fv2-c618f5010cb0abf9e805ae256078aa3c_b.jpg)
					- 图1.7 独立样本t检验统计检验量关系图输出界面![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fpic3.zhimg.com%2Fv2-40d1e40d573e3c3d2f68d36b8ba90a52_b.jpg)
- ## 2.3 配对样本t检验
	- 统计方法简介
		- 配对样本t检验是检验两组完全同质的样本之间是否存在差异的统计方法。例如，想要检验某种新的教学方法的教学效果，可以使用配对样本t检验对一个班级在使用新的教学方法前后的成绩进行对比。
			- 1. 配对样本t检验的使用前提是两总体正态分布且两总体方差未知。
			- 2. 配对样本t检验不要求两样本方差齐性且两样本的相关系数已知未知均可。
				- ![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fpic1.zhimg.com%2Fv2-d04d66594e05a58aad9b7f966ca231d8_b.jpg)
	- Gpower使用与操作
	- Gpower中对配对样本t检验的检验统计量的计算和独立样本t检验大致相同。
		- 计算样本量
			- 【示例】
				- 为了检验一学期以来学生的学习效果，使用配对样本t检验对比了部分同学在学期初和学期末的成绩，具体数据如下：
					- ![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fpic1.zhimg.com%2Fv2-5753aceeecb936ea07e1d320344db680_b.jpg)
				- 操作流程（见图1.8）
					- 配对样本t检验中计算样本量的操作与单样本t检验、独立样本t检验大致相同，只是在Statisticaltest中需要选定Means: Difference from two dependent means (matched pairs)，另外，当取得了部分数据需要对效应量进行计算时，除了和独立样本t检验一样需要提供两组（或前后测）的平均数与标准差外，还需要提供两组配对数据的相关系数。
					- 根据结果可知，当我们固定效应量为预估的0.47，且检验力至少大于0.8时，若我们要求配对样本t检验的结果在0.05水平上显著，则样本量至少为38（见图1.8 左）；若我们要求配对样本t检验的结果在0.01水平上显著，则至少需要56个被试（见图1.8 右）。
						- 图1.8 配对样本t检验样本量计算操作界面![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fpic4.zhimg.com%2Fv2-f067bd35c54d568b66d13bbcd69f02f7_b.jpg)
- ## 2.4 曼-特尼U检验Wilcoxon-Mann-Whitney test
	- 统计方法简介
		- Wilcoxon-Mann-Whitney test也叫维尔克松两样本检验法/曼-特尼维尔克松秩和检验、曼-特尼U检验
			- 1.与独立样本t检验相对应
			- 2.要求总体非正态、两独立样本均为顺序变量。
	- 计算方法
		- l n1、n2≤10时，首先将所有数据有小到大排列，将容量较小的样本中各数据的等级相加，用T表示，根据n1和n2的值查秩和检验表，将T值与临界值比较，若T≤T1或T≥T2表明两样本差异显著，否则不显著。
		- l n1、n2≥10时，秩和T接近正态分布，平均数μT=n1（n1+n2+1）/2，标准差σT=√(n1n2（n1+n2+1）/12)，n1≤n2，Z=（T- μT ）/ σT
	- Gpower使用与操作
		- 维尔克松两样本检验在Gpower中计算统计检验量的操作与独立样本t检验完全相同（见图1.9），只是Statisticaltest中需要选定Wilcoxon-Mann-Whitney test (two groups)，并额外需要在Input parameters中需要对Parentdistribution（总体分布）进行选择，包括Normal（正态分布）、Laplace（拉普拉斯分布）、Logistic（逻辑斯谛分布/增长分布）、minARE。
		- 图1.9 维尔克松两样本检验样本量计算操作界面 ![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fpic4.zhimg.com%2Fv2-7a319ddcef509a376bb2d29e9b916587_b.jpg)
- ## 2.5 符号秩和检验Wilcoxon signed-rank test
	- 统计方法简介
		- Wilcoxon signed-rank test也叫威尔科克森符号秩检验/维尔克森符号等级检验法/符号秩和检验/维尔克松检验法，也称符号秩和检验，其基本思想是假定配对的两种处理效应相同，即其差值的总体分布应为对称分布，且差值的总体中位数为0。
			- 1.要求非正态分布
			- 2. 与配对样本t检验相对应
	- 计算方法
		- l 对i=1,...,n，计算∣Xi-M0∣，它们代表这些样本点到M0的距离。
		- l 把上面的n个绝对值排序，并找出它们的n个秩，如果它们有相同的样本点，每个点取平均秩（如1,4,4,5的秩为1,2.5,2.5,4）。
		- l 令W+等于Xi-M0>0的∣Xi-M0∣的秩的和，而W-等于Xi-M0<0的∣Xi-M0∣的秩的和。
		- l 对双边检验H0：M=M0<=>H1：M≠M0，在零假设下，W+和W-应差不多。因而，当其中之一很小时，应怀疑零假设。在此，取检验统计量W=min(W+,W-)
		- l 根据得到的W值，利用统计软件或查Wilcoxon符号秩检验的分布表以得到在零假设下的p值。如果n很大要用正态近似：得到一个与W有关的正态随机变量Z的值，再用软件或查正态分布表得到p值。
		- l 如果p值较小（比如小于或等于给定的显著性水平，譬如0.05）则可以拒绝零假设。如果p值较大则没有充分的证据来拒绝零假设，但不意味着接受零假设。
	- Gpower使用与操作
		- Wilcoxonsigned-rank test（one sample case）在Gpower中计算统计检验量的操作与单样本t检验完全相同，Wilcoxon signed-rank test（matchedpairs）与配对样本t检验完全相同，但同样额外需要在Inputparameters中需要对Parent distribution进行选择。
- ## 2.6 点二列相关分析
	点二列相关特点：自变量为二元变量，如男女等真实分类变量。因变量为连续变量。
	
	¡涉及参数：
	
	|r| ：总体相关系数的绝对值，代表相关的效应大小
	
	Small r = 0.1
	
	medium r = 0.3
	
	large r = 0.5
	
	Ø例子：如果要达到r=0.25，1-β= 0.95，且相关系数是显著的需要多少被试？
	
	Ø输入：
	
	Tail(s) 选择One
	
	Effect size |ρ| = 0.25
	
	α err prob = 0.05
	
	Power (1-βprob) = 0.95
	
	Ø输出：
	
	Total sample size = 164
	
	![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fpic4.zhimg.com%2Fv2-defd2638117cd7f80d1e1972f4ada39b_b.jpg)
- ## 2.7 回归分析
	2.7.1 one group, size of slope
	
	¡目的：确定预测变量的斜率是否显著不同于0。即检验自变量对因变量的影响是否显著。
	
	H0 ：β=0 H1 ：β≠ 0
	
	回归方程公式：Y= α + βX +ε
	
	¡使用Gpower功能：
	
	1.计算达到期望斜率和检验功效的被试量
	
	2.实验后计算检验功效
	
	计算被试量
	
	问题1：为什么没有实验就能获得斜率值？
	
	β= r ×（Std devσy/ Std devσx)
	
	问题2：为什么没有实验就能获得变量的标准差？
	
	作者按照实验获得的是标准回归方程来设定，自变量和因变量都是标准正态分布，所以假设标准差为1.
	
	例子：H0 ：β≥0.40，为了保证β=0.20的回归方程，且检验功效达到0.95，需要多大的被试量？
	
	Ø输入：
	
	Tail(s) 选择One
	
	计算Slope H1：打开Calculate选择inputmode：ρ, σ_x, σ_y = ＞ slope。输入Correlationρ = 0.5、Std devσ_x和Std devσ_y为1。计算得到0.20
	
	α err prob = 0.05
	
	Power (1-βprob) = 0.95
	
	Slope H0 = 0.40
	
	Std devσ_x = Std devσ_y = 1
	
	Ø输出：
	
	Total sample size = 262
	
	![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fpic1.zhimg.com%2Fv2-754f893f8fed30366d2bd70f3a51e4d8_b.jpg)
	
	计算检验功效
	
	例子：每天锻炼的实际平均时间是否与6个月的训练计划后的身体质量指数(BMI)有关。经过调查后计算方程得到β=-0.0667，想知道斜率的检验力。
	
	需要的参数：自变量和因变量的标准差、斜率值、样本量
	
	Ø输入：
	
	Tail(s) 选择Two
	
	Slope H1 = -0.0667（双尾检验输入这项时需要带正负号）
	
	α err prob = 0.05
	
	Total sample size = 100
	
	Slope H0 = 0
	
	Std devσ_x = 7.5
	
	Std devσ_y = 4
	
	Ø输出：
	
	Power (1-βprob) = 0.2389693
	
	![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fpic2.zhimg.com%2Fv2-4d83050fe799b6ed3b4ba852578cd9b9_b.jpg)
	
	参考文献：Faul, F., Erdfelder, E.,Buchner, A., & Lang, A-G. (2009). Statistical power analyses using gpower3.1: tests for correlation andregression analyses. Behavior Research Methods.
	
	2.7.2two groups, different betweenintercepts
	
	¡适用条件：适用于斜率β相同，截距α1和α2可能不同的两个一元线性模型。
	
	¡目的：检验两个方程的截距是否存在差异。可以理解为检验两个群体是否为同质性群体（可以使用在检验实验组和控制组差异是否显著）
	
	¡相关参数：
	
	|Δintercept|=| α1 - α2 |
	
	两群体的样本量
	
	两群体自变量的标准差
	
	两群体自变量的平均数
	
	2.7.3 two groups, different between slopes
	
	¡目的：假设从两个不同的群体中抽取两个独立的样本，每个样本都与模型一致。检验自变量对因变量的效应，是否受到人群特征的影响而产生差异。
	
	1.计算检验功效
	
	Ø例子：研究者认为IAT的标准效度取决于测试情境中的自我激活程度。即人们对待酒精和软饮料的态度与他们自我报告的实际酒精消耗量之间存在相关，相关的程度受到人们是否被激活了自我概念的影响。实验后想计算检验功效的大小。
	
	实验组：激活了自我概念
	
	控制组：阅读无关词
	
	Ø相关参数：
	
	|Δslope|=|β1-β2|=|0.48-(-0.09)|=0.57
	
	Std dev. residual σ = 0.80
	
	参考文献：Perugini, M., O’Gorman, R., & Prestwich, A. (2007). Anontological test of the IAT: Self-activation can increase predictive validity.Experimental Psychology, 54, 134-147.
	
	计算被试量
	
	事先已经做了一次实验收集到数据，计算出斜率的差值，希望招募更多的被试来进行验证。
	
	Ø例子：男性的年龄和肺活量的关系。其中接触镉的经验作为分组变量。
	
	![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fpic4.zhimg.com%2Fv2-b82ddac45894c4e54c59828fb5750f7f_b.jpg)
	
	Ø相关参数：
	
	|Δslope|=|β1-β2|=| (-0.03061)-(-0.04653)|=0.01592
	
	Std dev. residual σ = 0.5578413
	
	N1 = 28, N2 = 44
	
	结论：一共需要419名被试，组1需163人，组2需要256人。
	
	![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fpic1.zhimg.com%2Fv2-228cc89c2c84d45be4d319bb8f6e25d4_b.jpg)
- ## 2.8 多元线性回归fixed model
		¡基本概念：评价多元回归模型中单个预测因子Xj的效果的特殊F检验
		
		¡目的：对单回归系数的t检验可以采用单尾检验的形式
		
		¡ F检验中的fixed model与t检验中的fixed model的关系：
		
		Ø例子：研究者认为IAT的标准效度取决于测试情境中的自我激活程度。想要评估由于交互作用而导致的检验功效的增加量。
		
		自变量：
		
		1.对酒水的态度（IAT量表测出）
		
		2. 虚拟变量（控制组，G=0；自我概念激活组，G=1）
		
		3.乘积变量G·X表示两者的交互作用
		
		因变量：自我报告的酒水消耗量
		
		Ø所需参数：
		
		Effect size f2: 解释方差与误差方差的比值
		
		Small f2 = 0.02
		
		medium f2 = 0.15
		
		large f2 = 0.35
		
		![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fpic1.zhimg.com%2Fv2-d93755decd6009b3635c5e9900d12694_b.jpg)